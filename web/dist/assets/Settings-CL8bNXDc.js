import{_ as g,c as l,a as t,e as d,g as v,v as m,b as r,n as p,t as A,d as u,o as a}from"./index-B4IwJXaR.js";const h={name:"Settings",data(){return{homeAssistant:{enabled:!1,url:"",long_lived_token:""},isConnected:!1,saveTimeout:null}},async mounted(){await this.loadSettings()},methods:{async loadSettings(){try{const s=(await u.getAppSettings()).data.settings;s.home_assistant&&(this.homeAssistant={enabled:s.home_assistant.enabled||!1,url:s.home_assistant.url||"",long_lived_token:s.home_assistant.long_lived_token||""})}catch(i){console.error("Failed to load settings:",i)}},async saveHomeAssistant(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(async()=>{try{await u.updateAppSettings("home_assistant",this.homeAssistant)}catch(i){alert("Failed to save settings: "+i)}},500)}}},c={class:"settings"},_={class:"settings-container"},b={class:"settings-section"},k={class:"setting-group"},y={class:"setting-label"},f={key:0,class:"setting-group"},H={class:"setting-label"},C={key:1,class:"setting-group"},x={class:"setting-label"},T={key:2,class:"status-indicator"};function S(i,s,w,B,e,o){return a(),l("div",c,[s[12]||(s[12]=t("h2",null,"Settings",-1)),t("div",_,[t("div",b,[s[10]||(s[10]=t("h3",null,"Home Assistant Integration",-1)),s[11]||(s[11]=t("p",{class:"section-description"}," Connect your matrix to Home Assistant for live data and automation. ",-1)),t("div",k,[t("label",y,[d(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=n=>e.homeAssistant.enabled=n),onChange:s[1]||(s[1]=(...n)=>o.saveHomeAssistant&&o.saveHomeAssistant(...n))},null,544),[[v,e.homeAssistant.enabled]]),s[6]||(s[6]=t("span",null,"Enable Home Assistant Integration",-1))])]),e.homeAssistant.enabled?(a(),l("div",f,[t("label",H,[s[7]||(s[7]=t("span",null,"Home Assistant URL",-1)),d(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>e.homeAssistant.url=n),onBlur:s[3]||(s[3]=(...n)=>o.saveHomeAssistant&&o.saveHomeAssistant(...n)),placeholder:"http://homeassistant.local:8123"},null,544),[[m,e.homeAssistant.url]])])])):r("",!0),e.homeAssistant.enabled?(a(),l("div",C,[t("label",x,[s[8]||(s[8]=t("span",null,"Long Lived Token",-1)),d(t("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=n=>e.homeAssistant.long_lived_token=n),onBlur:s[5]||(s[5]=(...n)=>o.saveHomeAssistant&&o.saveHomeAssistant(...n)),placeholder:"Enter your Home Assistant long-lived token"},null,544),[[m,e.homeAssistant.long_lived_token]]),s[9]||(s[9]=t("small",{class:"help-text"}," Create a long-lived access token in Home Assistant: Profile â†’ Long-Lived Access Tokens ",-1))])])):r("",!0),e.homeAssistant.enabled&&e.homeAssistant.url&&e.homeAssistant.long_lived_token?(a(),l("div",T,[t("span",{class:p(["status-dot",{connected:e.isConnected}])},null,2),t("span",null,A(e.isConnected?"Connected":"Not Connected"),1)])):r("",!0)])])])}const V=g(h,[["render",S],["__scopeId","data-v-a0727f67"]]);export{V as default};

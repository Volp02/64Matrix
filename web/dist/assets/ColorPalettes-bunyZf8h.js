import{_ as F,c as a,a as t,F as c,r as u,w as P,t as v,e as f,v as _,b as h,d as n,o,n as C,f as p}from"./index-B4IwJXaR.js";const g={name:"ColorPalettes",data(){return{defaultPalettes:[],customPalettes:[],selectedPaletteId:null,showCreateModal:!1,editingPalette:null,paletteForm:{name:"",colorsText:""}}},computed:{parsedColors(){return this.paletteForm.colorsText?this.paletteForm.colorsText.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0).filter(e=>/^#[0-9A-Fa-f]{6}$/.test(e)):[]},isFormValid(){return this.paletteForm.name.trim().length>0&&this.parsedColors.length>0}},async mounted(){await this.fetchPalettes(),await this.fetchSelectedPalette()},methods:{async fetchPalettes(){try{const s=await n.getPalettes();this.defaultPalettes=Object.values(s.data.default||{}),this.customPalettes=Object.values(s.data.custom||{})}catch(s){console.error("Failed to fetch palettes",s),alert("Failed to load palettes: "+s)}},async fetchSelectedPalette(){try{const s=await n.getSystemStatus();this.selectedPaletteId=s.data.selected_palette||"aurora"}catch(s){console.error("Failed to fetch selected palette",s)}},async selectPalette(s){try{await n.selectPalette(s),this.selectedPaletteId=s}catch(e){alert("Failed to select palette: "+e)}},editPalette(s){this.editingPalette=s,this.paletteForm.name=s.name,this.paletteForm.colorsText=s.colors.join(", ")},removeColor(s){const e=this.parsedColors;e.splice(s,1),this.paletteForm.colorsText=e.join(", ")},async savePalette(){if(this.isFormValid)try{const s={name:this.paletteForm.name,colors:this.parsedColors};this.editingPalette?await n.updatePalette(this.editingPalette.id,{...s,id:this.editingPalette.id}):await n.createPalette(s),await this.fetchPalettes(),this.closeModal()}catch(s){alert("Failed to save palette: "+s)}},async deletePalette(s){if(confirm("Delete this palette?"))try{await n.deletePalette(s),await this.fetchPalettes()}catch(e){alert("Failed to delete palette: "+e)}},closeModal(){this.showCreateModal=!1,this.editingPalette=null,this.paletteForm={name:"",colorsText:""}}}},k={class:"color-palettes"},y={class:"palette-section"},w={class:"palette-grid default-grid"},b=["onClick"],x={class:"palette-preview"},M=["title"],S={class:"palette-name"},T={key:0,class:"selected-badge"},I={class:"palette-section"},V={class:"palette-grid custom-grid"},D=["onClick"],E={class:"palette-preview"},j=["title"],N={class:"palette-name"},B={key:0,class:"selected-badge"},z=["onClick"],A=["onClick"],O={class:"modal"},U={class:"modal-content"},L={class:"form-group"},Y={class:"form-group"},q={class:"color-preview"},G=["title"],H=["onClick"],J={class:"modal-actions"},K=["disabled"];function Q(s,e,R,W,i,r){return o(),a("div",k,[e[12]||(e[12]=t("h2",null,"Color Palettes",-1)),t("section",y,[e[6]||(e[6]=t("h3",null,"Default Palettes",-1)),t("div",w,[(o(!0),a(c,null,u(i.defaultPalettes,l=>(o(),a("div",{key:l.id,class:C(["palette-card",{selected:i.selectedPaletteId===l.id}]),onClick:d=>r.selectPalette(l.id)},[t("div",x,[(o(!0),a(c,null,u(l.colors,(d,m)=>(o(),a("div",{key:m,class:"color-swatch",style:p({backgroundColor:d}),title:d},null,12,M))),128))]),t("div",S,v(l.name),1),i.selectedPaletteId===l.id?(o(),a("div",T,"✓ Selected")):h("",!0)],10,b))),128))])]),t("section",I,[e[8]||(e[8]=t("h3",null,"Your Palettes",-1)),t("div",V,[t("div",{class:"palette-card add-card",onClick:e[0]||(e[0]=l=>i.showCreateModal=!0)},[...e[7]||(e[7]=[t("div",{class:"add-icon"},"+",-1),t("div",{class:"palette-name"},"Add Palette",-1)])]),(o(!0),a(c,null,u(i.customPalettes,l=>(o(),a("div",{key:l.id,class:C(["palette-card",{selected:i.selectedPaletteId===l.id}]),onClick:d=>r.selectPalette(l.id)},[t("div",E,[(o(!0),a(c,null,u(l.colors,(d,m)=>(o(),a("div",{key:m,class:"color-swatch",style:p({backgroundColor:d}),title:d},null,12,j))),128))]),t("div",N,v(l.name),1),i.selectedPaletteId===l.id?(o(),a("div",B,"✓ Selected")):h("",!0),t("button",{class:"edit-btn",onClick:P(d=>r.editPalette(l),["stop"]),title:"Edit palette"}," ✎ ",8,z),t("button",{class:"delete-btn",onClick:P(d=>r.deletePalette(l.id),["stop"]),title:"Delete palette"}," × ",8,A)],10,D))),128))])]),i.showCreateModal||i.editingPalette?(o(),a("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=P((...l)=>r.closeModal&&r.closeModal(...l),["self"]))},[t("div",O,[t("h3",null,v(i.editingPalette?"Edit Palette":"Create New Palette"),1),t("div",U,[t("div",L,[e[9]||(e[9]=t("label",null,"Palette Name:",-1)),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>i.paletteForm.name=l),type:"text",placeholder:"Enter palette name"},null,512),[[_,i.paletteForm.name]])]),t("div",Y,[e[10]||(e[10]=t("label",null,"Colors (hex format, one per line or comma-separated):",-1)),f(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>i.paletteForm.colorsText=l),placeholder:"#FF0000, #00FF00, #0000FF",rows:"6"},null,512),[[_,i.paletteForm.colorsText]]),e[11]||(e[11]=t("small",null,"Enter colors in hex format (e.g., #FF0000)",-1))]),t("div",q,[(o(!0),a(c,null,u(r.parsedColors,(l,d)=>(o(),a("div",{key:d,class:"preview-swatch",style:p({backgroundColor:l}),title:l},[r.parsedColors.length>1?(o(),a("button",{key:0,class:"remove-color",onClick:m=>r.removeColor(d)}," × ",8,H)):h("",!0)],12,G))),128))])]),t("div",J,[t("button",{onClick:e[3]||(e[3]=(...l)=>r.savePalette&&r.savePalette(...l)),disabled:!r.isFormValid},"Save",8,K),t("button",{onClick:e[4]||(e[4]=(...l)=>r.closeModal&&r.closeModal(...l))},"Cancel")])])])):h("",!0)])}const Z=F(g,[["render",Q],["__scopeId","data-v-ffde364e"]]);export{Z as default};
